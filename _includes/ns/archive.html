<div class="container-fluid">
    <div class="row my-5">
        <div class="col mx-5">
            <h2 class="mb-0">
                <span class="text-primary">Post Archive</span>
            </h2>

            {% for post in site.categories.narrative-segment  %}
                {% capture this_year %}{{ post.date | date: "%Y" }}{% endcapture %}
                {% capture next_year %}{{ post.previous.date | date: "%Y" }}{% endcapture %}
            
                {% if forloop.first %}
                <h4 id="{{ this_year }}-ref">{{this_year}}</h4>
                <ul style="list-style-type:none">
                {% endif %}
            
                <li>{{ post.date | date: "%-d %B"}} | <a href="{{ post.url }}">{{ post.title }}</a></li>
            
                {% if forloop.last %}
                </ul>
                {% else %}
                    {% if this_year != next_year %}
                    </ul>
                    <h4 id="{{ next_year }}-ref">{{next_year}}</h4>
                    <ul>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    </div>        
</div>
